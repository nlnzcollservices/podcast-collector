import sys
sys.path.insert(0, r"Y:\ndha\pre-deposit_prod\LD_working\alma_tools")
from alma_tools import AlmaTools	
try:
	from settings import file_folder, template_folder, working_folder, report_folder, config, logging, sb_key, deleted_items
except:
	from settings_prod import file_folder, template_folder, working_folder, report_folder, config, logging, sb_key, deleted_items_holdings

###Was not finished - draft

def dups_deleting_routine(mms_list):

	"""Deleting duplicate items and holdings. Leaving the last holding and the last item in the last holding"""

	print("Checking and deleting holding and item duplicates...")
	for mmsline in mms_list:
		mms_id = str(mmsline[0])
		print(mms_id)
		item_pid = ""
		my_alma=AlmaTools("prod")
		my_alma.get_holdings(mms_id)
		holdings_data = my_alma.xml_response_data
		
		if len(holdings_list) >=1:
			print("The number of holdings is " +len(holdings_list))
			for ind in range(len(holdings_list)):
				#checks if this is the last holding to set minus one for keeping the last item of this holding and then to delete all other holdings.
				if ind<len(holdings_list)-1:
					not_last_holding=0
				else:
					not_last_holding=1
				holding_id = holdings_list[ind]
				my_alma.get_items(mms_id, holding_id)
				items_data = my_alma.xml_response_data
				parsing_items_data()
				print("Number of items is " + len(items_list))
				if len(items_list) >1:
					print(mms_id)


mms_list = [
"9919353402502836",
"9918922770902836",
"9918922670402836",
"9918875073402836",
"9918875073302836",
"9918874973502836",
"9918851373602836",
"9918851373502836",
"9918851373402836",
"9918851373302836",
"9918849873602836",
"9918849873502836",
"9918849873402836",
"9918849873302836",
"9918849773602836",
"9918849773502836",
"9918826873202836",
"9918826773302836",
"9918826773202836",
"9918824673602836",
"9918824673502836",
"9918824673402836",
"9918824673302836",
"9918824573602836",
"9918824573502836",
"9918824573402836",
"9918824573302836",
"9918824573202836",
"9918824573102836",
"9918824573002836",
"9918815373602836",
"9918815373502836",
"9918815373402836",
"9918815373302836",
"9918815273602836",
"9918815273502836",
"9918815273402836",
"9918815273302836",
"9918815273202836",
"9918815273102836",
"9918815273002836",
"9918809573302836",
"9918809573202836",
"9918809573102836",
"9918809573002836",
"9918809572902836",
"9918809572802836",
"9918809473002836",
"9918809472902836",
"9918809472802836",
"9918809472702836",
"9918809472602836",
"9918809472502836",
"9918809472402836",
"9918809472302836",
"9918809472202836",
"9918809472102836",
"9918761569202836",
"9918761569102836",
"9918761569002836",
"9918761568902836",
"9918761568802836",
"9918761568702836",
"9918761568602836",
"9918761568502836",
"9918761568402836",
"9918761468202836",
"9918761468102836",
"9918761468002836",
"9918761467902836",
"9918761467802836",
"9918761467702836",
"9918761467602836",
"9918761467502836",
"9918611163802836",
"9918611163702836",
"9918611163602836",
"9918611163502836",
"9918611163402836",
"9918611069102836",
"9918611069002836",
"9918611068902836",
"9918611068802836",
"9918611068702836",
"9918611068602836",
"9918611068502836",
"9918611068402836",
"9918611068302836",
"9919353402402836",
"9918611173602836",
"9918611173502836",
"9918611173402836",
"9918611173302836",
"9918611173202836",
"9918611173102836",
"9918611173002836",
"9918611172902836",
"9918611073602836",
"9918611073502836",
"9918611073402836",
"9918611073302836",
"9918611073202836",
"9918611073102836",
"9918611073002836",
"9918611072902836",
"9918611072802836",
"9918611072702836",
"9918611072602836",
"9918611072502836",
"9918611072402836",
"9918611072302836",
"9918611072202836",
"9918611072102836",
"9918611072002836",
"9918611071902836",
"9918611071802836",
"9918611071702836",
"9918585173602836",
"9918585173502836",
"9918585173402836",
"9918585173302836",
"9918585173202836",
"9918585173102836",
"9918585173002836",
"9918585172902836",
"9918585172802836",
"9918585172702836",
"9918585172602836",
"9918585172502836",
"9918585172402836",
"9918585172302836",
"9918585172202836",
"9918585172102836",
"9918585172002836",
"9918585171902836",
"9918585171802836",
"9918585171702836",
"9918585171602836",
"9918585171502836",
"9918585171402836",
"9918585171302836",
"9918585171202836",
"9918585073602836",
"9918585073502836",
"9918585073402836",
"9918585073302836",
"9918585073202836",
"9918585073102836",
"9918585073002836",
"9918585072902836",
"9918585072802836",
"9918585072702836",
"9918585072602836",
"9918585072502836",
"9918585072402836",
"9918585072302836",
"9918585072202836",
"9918585072102836",
"9918585072002836",
"9918585071902836",
"9918585071802836",
"9918585071702836",
"9918585071602836",
"9918585071502836",
"9918585071402836",
"9918585071302836",
"9918585071202836",
"9918585071102836",
"9918585071002836",
"9918585070902836",
"9918585070802836",
"9918585070702836",
"9918585070602836",
"9919353504202836",
"9919353402302836",
"9919353402202836",
"9919353402102836",
"9919353402002836",
"9919353401902836",
"9918585171102836",
"9918585171002836",
"9918585170902836",
"9918585170802836",
"9918585170702836",
"9918585170602836",
"9918585170502836",
"9918585170402836",
"9918585170302836",
"9918585170202836",
"9918585170102836",
"9918585170002836",
"9918585169902836",
"9918585169802836",
"9918585169702836",
"9918585169602836",
"9918585169502836",
"9918585169402836",
"9918585070502836",
"9918585070402836",
"9918585070302836",
"9918585070202836",
"9918585070102836",
"9918585070002836",
"9918585069902836",
"9918585069802836",
"9918585069702836",
"9918585069602836",
"9918585069502836",
"9918585069402836",
"9918585069302836",
"9918585069202836",
"9918585069102836",
"9918585069002836",
"9918585068902836",
"9918585068802836",
"9918585068702836",
"9918585068602836",
"9918585068502836",
"9918585068402836",
"9918585068302836",
"9918585068202836",
"9918585068102836",
"9918585068002836",
"9919353504102836",
"9919353504002836",
"9919353503902836",
"9919353503802836",
"9919353503702836",
"9919353503602836",
"9919353503502836",
"9919353503402836",
"9919353503302836",
"9919353503202836",
"9919353503102836",
"9919353503002836",
"9919353502902836",
"9919353502802836",
"9919353502702836",
"9919353401802836",
"9919353401702836",
"9919353401602836",
"9919353401502836",
"9919353401402836",
"9919353401302836",
"9919353401202836",
"9919353401102836",
"9919353401002836",
"9919353400902836",
"9919353400802836",
"9919353400702836",
"9919353502602836",
"9919353502502836",
"9919353502402836",
"9919353502302836",
"9919353502202836",
"9919353502102836",
"9919353502002836",
"9919353501902836",
"9919353501802836",
"9919353501702836",
"9919353501602836",
"9919353501502836",
"9919353501402836",
"9919353501302836",
"9919353501202836",
"9919353501102836",
"9919353501002836",
"9919353500902836",
"9919353500802836",
"9919353500702836",
"9919353500602836",
"9919353500502836",
"9919353500402836",
"9919353500302836",
"9919353500202836",
"9919353400602836",
"9919353400502836",
"9919353400402836",
"9919353400302836",
"9919353400202836",
"9919353400102836",
"9919353400002836",
"9919353399902836",
"9919353399802836",
"9919353399702836",
"9919353399602836",
"9919353399502836",
"9919353399402836",
"9919353399302836",
"9919353399202836",
"9919353399102836",
"9919353399002836",
"9919353398902836",
"9919353398802836",
"9919353398702836",
"9919353398602836",
"9919353398502836",
"9919353398402836",
"9919353398302836",
"9919353398202836",
"9919353398102836",
"9919353398002836",
"9919353500102836",
"9919353500002836",
"9919353499902836",
"9919353499802836",
"9919353499702836",
"9919353499602836",
"9919353499502836",
"9919353499402836",
"9919353499302836",
"9919353499202836",
"9919353499102836",
"9919353499002836",
"9919353498902836",
"9919353498802836",
"9919353498702836",
"9919353498602836",
"9919353498502836",
"9919353498402836",
"9919353498302836",
"9919353498202836",
"9919353498102836",
"9919353498002836",
"9919353397902836",
"9919353397802836",
"9919353397702836",
"9919353397602836",
"9919353397502836",
"9919353397402836",
"9919353397302836",
"9919353397202836",
"9919353397102836",
"9919353397002836",
"9919353396902836",
"9919353396802836",
"9919353396702836",
"9919353396602836"]



dups_deleting_routine(mms_list)